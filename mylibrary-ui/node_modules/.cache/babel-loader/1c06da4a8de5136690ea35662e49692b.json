{"remainingRequest":"/Users/weizhang/JAVASHOP/mylibrary-ui/node_modules/thread-loader/dist/cjs.js!/Users/weizhang/JAVASHOP/mylibrary-ui/node_modules/babel-loader/lib/index.js!/Users/weizhang/JAVASHOP/mylibrary-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/weizhang/JAVASHOP/mylibrary-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/weizhang/JAVASHOP/mylibrary-ui/src/views/data/book/detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/weizhang/JAVASHOP/mylibrary-ui/src/views/data/book/detail.vue","mtime":1581209313948},{"path":"/Users/weizhang/JAVASHOP/mylibrary-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weizhang/JAVASHOP/mylibrary-ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weizhang/JAVASHOP/mylibrary-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weizhang/JAVASHOP/mylibrary-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weizhang/JAVASHOP/mylibrary-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getPdfViewerUrl, getPublishHouse, getClassification, getAuthor, getFileBaseurl } from '@/api/data.js';\nimport { doCacheImage, doSaveBook } from '@/api/operation';\nexport default {\n  name: 'detail',\n  methods: {\n    submit: function submit() {\n      var _this = this;\n\n      var publishtime = new doSaveBook(this.data).then(function (resp) {\n        if (resp.state) {\n          _this.$notify({\n            title: '成功',\n            message: '执行成功',\n            type: 'success'\n          });\n        } else {\n          _this.$notify.error({\n            title: '失败',\n            message: '执行失败' + resp.message\n          });\n        }\n      }); //this.visible=false;\n    },\n    setCover: function setCover() {\n      var _this2 = this;\n\n      var covera = this.data.fileid + \"/\" + this.coverNo + \".jpg\";\n      this.data.covera = covera;\n      var param = {};\n      param.id = this.data.id;\n      param.covera = covera;\n      doSaveBook(param).then(function (resp) {\n        if (resp.state) {\n          _this2.$notify({\n            title: '成功',\n            message: '执行成功',\n            type: 'success'\n          });\n        } else {\n          _this2.$notify.error({\n            title: '失败',\n            message: '执行失败' + resp.message\n          });\n        }\n      });\n    },\n    refreshCarousel: function refreshCarousel() {\n      var _this3 = this;\n\n      this.refreshCarouselFlag = false;\n      this.$nextTick(function () {\n        _this3.refreshCarouselFlag = true;\n      });\n    },\n    cacheImageHandler: function cacheImageHandler() {\n      var _this4 = this;\n\n      var filepath = this.data.filepath;\n      doCacheImage(filepath, this.cacheImageNumber).then(function (resp) {\n        if (resp.state) {\n          _this4.refreshCarousel();\n\n          _this4.$notify({\n            title: '成功',\n            message: '执行成功',\n            type: 'success'\n          });\n        } else {\n          _this4.$notify.error({\n            title: '失败',\n            message: '执行失败' + resp.message\n          });\n        }\n      });\n    },\n    generateImageUrls: function generateImageUrls() {\n      var pdfFolder = this.data.filepath.split('\\.')[0];\n      var imageFolder = this.fileBaseUrl + pdfFolder;\n      this.imageUrls.push(imageFolder + '/' + '1.jpg');\n      this.imageUrls.push(imageFolder + '/' + '2.jpg');\n      this.imageUrls.push(imageFolder + '/' + '3.jpg');\n      console.log(this.imageUrls);\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentRow = val;\n    },\n    handleTagClose: function handleTagClose(tag) {\n      this.tagArr.splice(this.tagArr.indexOf(tag), 1);\n      this.data.tag = this.tagArr.join('/');\n    },\n    showTagInput: function showTagInput() {\n      var _this5 = this;\n\n      this.inputVisible = true;\n      this.$nextTick(function (_) {\n        _this5.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n    handleTagInputConfirm: function handleTagInputConfirm() {\n      var inputValue = this.inputValue;\n\n      if (inputValue) {\n        if (this.tagArr.indexOf(inputValue) < 0) {\n          this.tagArr.push(inputValue);\n        }\n      }\n\n      this.inputVisible = false;\n      this.inputValue = '';\n      this.data.tag = this.tagArr.join('/');\n    }\n  },\n  data: function data() {\n    return {\n      form: {\n        name: '',\n        region: '',\n        date1: '',\n        date2: '',\n        delivery: false,\n        type: [],\n        resource: '',\n        desc: ''\n      },\n      coverNo: 1,\n      refreshCarouselFlag: true,\n      cacheImageNumber: 3,\n      input1Max: 6,\n      input1Min: 0,\n      input1Step: 1,\n      imageUrls: [],\n      currentRow: null,\n      inputVisible: false,\n      inputValue: '',\n      formLabelWidth: '120px',\n      visible: true,\n      data: this.row,\n      pdfViewer: '',\n      fileBaseUrl: '',\n      classification: [],\n      publishhouse: [],\n      author: []\n    };\n  },\n  computed: {\n    coveraUrl: function coveraUrl() {\n      return this.fileBaseUrl + this.data.covera;\n    },\n    pdfUrl: function pdfUrl() {\n      return this.pdfViewer + '?file=' + this.fileBaseUrl + this.data.filepath;\n    },\n    tagArr: function tagArr() {\n      if (this.data.tag) {\n        return this.data.tag.split('/');\n      } else {\n        return [];\n      }\n    }\n  },\n  watch: {\n    visible: function visible(v) {\n      this.$parent.showDetail = v;\n      this.visible = true;\n    }\n  },\n  props: {\n    row: {\n      type: Object\n    }\n  },\n  mounted: function mounted() {\n    var _this6 = this;\n\n    //this.data=JSON.parse(JSON.stringify(this.templateData)); //this.templateData是父组件传递的对象\n    getFileBaseurl().then(function (resp) {\n      if (resp.state) {\n        _this6.fileBaseUrl = resp.data;\n\n        _this6.generateImageUrls();\n      }\n    });\n    getPdfViewerUrl().then(function (resp) {\n      if (resp.state) {\n        _this6.pdfViewer = resp.data;\n      }\n    });\n    getClassification().then(function (resp) {\n      if (resp.state) {\n        _this6.classification = resp.data;\n      }\n    });\n    getPublishHouse().then(function (resp) {\n      if (resp.state) {\n        _this6.publishhouse = resp.data;\n      }\n    });\n    this.author = getAuthor().then(function (resp) {\n      if (resp.state) {\n        _this6.author = resp.data;\n      }\n    });\n  }\n};",null]}